<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Signature Capital</title>
<style>
  :root{
    --bg:#0f1720;
    --card:#0b1220;
    --accent:#0ea5a4;
    --muted:#8793a3;
    --gold:#d4af37;
    --white:#ffffff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  }
  html,body{
    height:100%;
    margin:0;
    background:linear-gradient(180deg,#071021 0%, #091827 100%);
    color:var(--white);
    -webkit-font-smoothing:antialiased;
  }
  .app{
    max-width:420px;
    margin:0 auto;
    height:100vh;
    display:flex;
    flex-direction:column;
    box-shadow:0 0 40px rgba(0,0,0,.6);
  }
  header{
    padding:12px;
    display:flex;
    align-items:center;
    gap:12px;
  }
  .logo{
    width:52px;
    height:52px;
    border-radius:12px;
    background:rgba(255,255,255,.02);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    border:1px solid rgba(212,175,55,0.28);
  }
  .logo img{
    width:100%;
    height:100%;
    object-fit:contain;
    display:block;
  }
  .title{font-weight:600;font-size:16px}
  /* ACCOUNTS CARD */
  .accounts-card{
    background:linear-gradient(90deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));
    margin:12px;
    border-radius:12px;
    padding:14px;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .acc-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .acc-name{font-size:13px;font-weight:600}
  .acc-amt{font-size:16px;font-weight:700;color:var(--gold)}
  .acc-total{
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-top:1px solid rgba(255,255,255,0.04);
    padding-top:8px;
  }
  .acc-total-title{font-size:12px;color:var(--muted)}
  .acc-total-amt{font-size:18px;font-weight:700;color:#fff}
  .actions{display:flex;gap:8px;margin-top:4px}
  button{
    background:var(--accent);
    border:none;
    padding:10px 12px;
    border-radius:10px;
    color:white;
    font-weight:600;
    flex:1;
    font-size:14px;
    cursor:pointer;
  }
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
  /* CREDIT CARD */
  .cc-card{
    background:linear-gradient(180deg,#0b1220,#071021);
    margin:0 12px 12px;
    border-radius:12px;
    padding:14px;
  }
  .cc-top{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:12px;
  }
  .cc-balance{font-size:19px;font-weight:700;color:#fca5a5}
  main{flex:1;overflow:auto;padding:12px}
  .section-title{margin-top:4px;font-weight:700}
  .transactions{display:flex;flex-direction:column;gap:8px;padding-bottom:24px}
  .tx{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;display:flex;justify-content:space-between;align-items:center}
  .tx-left{display:flex;flex-direction:column;gap:6px}
  .tx-merchant{font-weight:700}
  .tx-details{font-size:12px;color:var(--muted)}
  .tx-amount{font-weight:700}
  .send-form{
    padding:12px;
    background:linear-gradient(180deg,#071827,#06141c);
    border-radius:12px;
    margin-top:12px;
    display:none;
    flex-direction:column;
    gap:8px;
  }
  .field{display:flex;flex-direction:column;gap:6px}
  input[type="text"],input[type="number"],input[type="password"],select{
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
    background:transparent;
    color:var(--white);
    outline:none;
  }
  .row{display:flex;gap:8px}
  .login-screen{
    position:fixed;
    inset:0;
    background:linear-gradient(180deg,#071021 0%, #091827 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:999;
    padding:20px;
  }
  .login-box{
    max-width:420px;
    width:100%;
    background:var(--card);
    padding:22px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,0.03);
  }
  footer{padding:8px;text-align:center;font-size:12px;color:var(--muted)}
  .logout-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.15);
    padding:6px 10px;
    border-radius:8px;
    font-size:12px;
    cursor:pointer;
  }
  @media (max-width:420px){
    .app{height:100vh}
    .title{font-size:14px}
  }
  a.fake-link{color:var(--accent);font-size:12px;text-decoration:none;cursor:pointer}
</style>
</head>
<body>
<div class="app" id="app">
  <header>
    <div class="logo">
      <img id="logoImg" alt="Signature Capital logo" src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><rect width='160' height='160' rx='26' fill='%230f1720' stroke='%23d4af37' stroke-width='6'/><text x='50%' y='50%' text-anchor='middle' fill='%23d4af37' font-family='Segoe Script,Brush Script MT,cursive' font-size='46' dy='.25em'>Sig</text></svg>">
    </div>
    <div style="flex:1">
      <div class="title">Signature Capital</div>
      <div class="small" id="welcomeLine">Welcome, Master Lighting Productions</div>
    </div>
    <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
  </header>

  <!-- ACCOUNTS BLOCK -->
  <div class="accounts-card" id="accountsCard">
    <div class="acc-row">
      <div class="acc-name">Master Lighting Productions</div>
      <div class="acc-amt" id="balBusiness">$0.00</div>
    </div>
    <div class="acc-row">
      <div class="acc-name">Menachem Boaron</div>
      <div class="acc-amt" id="balPersonal">$0.00</div>
    </div>
    <div class="acc-total">
      <div class="acc-total-title">Total cash</div>
      <div class="acc-total-amt" id="balTotal">$0.00</div>
    </div>
    <div class="actions">
      <button id="sendBtn">Send / Transfer</button>
    </div>
  </div>

  <!-- CREDIT CARD BLOCK -->
  <div class="cc-card">
    <div class="cc-top">
      <div>
        <div class="small">Credit card</div>
        <div class="cc-balance" id="ccOwed">$0.00</div>
      </div>
      <div style="text-align:right">
        <div class="small" id="ccLimit">Limit $0.00</div>
        <div class="small">Available <span id="ccAvail">$0.00</span></div>
      </div>
    </div>
  </div>

  <main>
    <!-- SEND FORM -->
    <div class="send-form" id="sendForm" role="region" aria-label="Wire transfer form">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:700">Wire Transfer</div>
        <div class="small" id="currentBalanceSmall">$0.00</div>
      </div>

      <div class="field">
        <label class="small">From account</label>
        <select id="fromAccount">
          <option value="business">Master Lighting Productions</option>
          <option value="personal">Menachem Boaron</option>
        </select>
      </div>

      <div class="field">
        <label class="small">Recipient name</label>
        <input id="recName" type="text" placeholder="Full name">
      </div>

      <div class="row">
        <div class="field" style="flex:1">
          <label class="small">Routing / ABA</label>
          <input id="routing" type="text" placeholder="9 digits">
        </div>
        <div class="field" style="flex:1">
          <label class="small">Account #</label>
          <input id="acctNo" type="text" placeholder="Account number">
        </div>
      </div>

      <div class="field">
        <label class="small">Bank name</label>
        <input id="bankName" type="text" placeholder="Bank name">
      </div>

      <div class="field">
        <label class="small">Amount (USD)</label>
        <input id="amount" type="number" placeholder="5000.00" min="0" step="0.01">
      </div>

      <div style="display:flex;gap:8px;">
        <button id="confirmSend">Confirm & Send</button>
        <button id="cancelSend" class="ghost">Cancel</button>
      </div>

      <div id="sendMessage" class="small" style="color:#fca5a5"></div>
    </div>

    <!-- ACCOUNT TX -->
    <div class="section-title" style="margin-top:8px">Account transactions</div>
    <div class="transactions" id="txList" aria-live="polite"></div>

    <!-- CC TX -->
    <div class="section-title" style="margin-top:16px">Credit card transactions</div>
    <div class="transactions" id="txListCC" aria-live="polite"></div>
  </main>

  <footer>Signature Capital</footer>
</div>

<script>
(function(){
  const $ = id => document.getElementById(id);
  const formatCurrency = n => {
    if (isNaN(n)) return "$0.00";
    return "$" + Number(n).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});
  };

  // defaults
  const DEFAULT_ACCOUNTS = {
    business: 12038450.72,     // Master Lighting Productions
    personal: 2345980.34       // Menachem Boaron (2.3M and change)
  };
  const DEFAULT_CC = {
    owed: 49872.11,
    limit: 250000
  };

  const KEY = {
    AUTH: 'sigcap_demo_auth_v5',
    ACCOUNTS: 'sigcap_demo_accounts_v5',
    CC: 'sigcap_demo_cc_v5',
    TX_ACCOUNTS: 'sigcap_demo_tx_accounts_v5',
    TX_CC: 'sigcap_demo_tx_cc_v5'
  };

  const sendBtn = $('sendBtn');
  const sendForm = $('sendForm');
  const confirmSend = $('confirmSend');
  const cancelSend = $('cancelSend');
  const fromAccount = $('fromAccount');
  const amountI = $('amount');
  const recName = $('recName');
  const routing = $('routing');
  const acctNo = $('acctNo');
  const bankName = $('bankName');
  const sendMessage = $('sendMessage');
  const currentBalanceSmall = $('currentBalanceSmall');

  const balBusiness = $('balBusiness');
  const balPersonal = $('balPersonal');
  const balTotal = $('balTotal');

  const ccOwed = $('ccOwed');
  const ccLimit = $('ccLimit');
  const ccAvail = $('ccAvail');

  const txList = $('txList');
  const txListCC = $('txListCC');

  const logoutBtn = $('logoutBtn');

  // init
  if (!localStorage.getItem(KEY.AUTH)) {
    showLogin();
  } else {
    init();
  }

  function showLogin(){
    const overlay = document.createElement('div');
    overlay.className = 'login-screen';
    overlay.innerHTML = `
      <div class="login-box" role="dialog" aria-modal="true" aria-label="Signature Capital login">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <div class="logo" style="width:48px;height:48px">
            <img src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><rect width='160' height='160' rx='26' fill='%230f1720' stroke='%23d4af37' stroke-width='6'/><text x='50%' y='50%' text-anchor='middle' fill='%23d4af37' font-family='Segoe Script,Brush Script MT,cursive' font-size='46' dy='.25em'>Sig</text></svg>" style="width:100%;height:100%;object-fit:contain" alt="logo">
          </div>
          <div>
            <div style="font-weight:700;font-size:16px">Signature Capital</div>
            <div class="small">Secure Banking Access</div>
          </div>
        </div>

        <div class="field">
          <label class="small">Username</label>
          <input id="loginUser" type="text" placeholder="username">
        </div>
        <div class="field">
          <label class="small">Password</label>
          <input id="loginPass" type="password" placeholder="password">
        </div>

        <div style="display:flex;gap:8px;margin-top:12px">
          <button id="loginBtn">Login</button>
        </div>

        <div style="margin-top:10px">
          <a class="fake-link" id="forgotBtn">Forgot password?</a>
        </div>
      </div>
    `;
    document.body.appendChild(overlay);

    overlay.querySelector('#loginBtn').addEventListener('click', () => {
      const u = overlay.querySelector('#loginUser').value.trim();
      const p = overlay.querySelector('#loginPass').value.trim();
      if (!u || !p) { alert('Enter username and password'); return; }
      localStorage.setItem(KEY.AUTH,'1');
      overlay.remove();
      init();
    });
    overlay.querySelector('#loginPass').addEventListener('keydown', e=>{
      if (e.key === 'Enter') overlay.querySelector('#loginBtn').click();
    });
    overlay.querySelector('#forgotBtn').addEventListener('click', ()=> alert('Demo: password reset not enabled.'));
  }

  function init(){
    if (!localStorage.getItem(KEY.ACCOUNTS)) {
      localStorage.setItem(KEY.ACCOUNTS, JSON.stringify(DEFAULT_ACCOUNTS));
    }
    if (!localStorage.getItem(KEY.CC)) {
      localStorage.setItem(KEY.CC, JSON.stringify(DEFAULT_CC));
    }
    if (!localStorage.getItem(KEY.TX_ACCOUNTS)) {
      localStorage.setItem(KEY.TX_ACCOUNTS, JSON.stringify(generateAccountTXs()));
    }
    if (!localStorage.getItem(KEY.TX_CC)) {
      localStorage.setItem(KEY.TX_CC, JSON.stringify(generateCCTxs()));
    }

    bindUI();
    renderAll();
  }

  function bindUI(){
    sendBtn.addEventListener('click', ()=>{
      sendForm.style.display = (sendForm.style.display === 'flex') ? 'none' : 'flex';
      sendForm.style.flexDirection = 'column';
      sendMessage.textContent = '';
      amountI.value = recName.value = routing.value = acctNo.value = bankName.value = '';
      updateCurrentBalanceSmall();
    });

    fromAccount.addEventListener('change', updateCurrentBalanceSmall);

    cancelSend.addEventListener('click', ()=> {
      sendForm.style.display = 'none';
    });

    confirmSend.addEventListener('click', ()=> {
      sendMessage.style.color = '#fca5a5';
      sendMessage.textContent = '';

      const amt = Number(amountI.value);
      if (!recName.value.trim()) {
        return sendMessage.textContent = 'Enter recipient name';
      }
      if (!amt || isNaN(amt) || amt <= 0) {
        return sendMessage.textContent = 'Enter valid amount';
      }

      const accounts = JSON.parse(localStorage.getItem(KEY.ACCOUNTS) || '{}');
      const from = fromAccount.value; // 'business' or 'personal'
      const current = Number(accounts[from] || 0);

      if (amt > current) {
        return sendMessage.textContent = 'Insufficient funds';
      }

      // subtract and save
      accounts[from] = Number((current - amt).toFixed(2));
      localStorage.setItem(KEY.ACCOUNTS, JSON.stringify(accounts));

      // add transaction to account tx list
      const accTxs = JSON.parse(localStorage.getItem(KEY.TX_ACCOUNTS) || '[]');
      accTxs.unshift({
        id: 'wire_' + Date.now(),
        account: from,
        merchant: `Wire to ${recName.value}`,
        amount: amt,
        iso: new Date().toISOString(),
        note: `Acct ${acctNo.value || 'n/a'} • ${bankName.value || 'Bank'}`
      });
      localStorage.setItem(KEY.TX_ACCOUNTS, JSON.stringify(accTxs.slice(0,500)));

      renderAll();
      sendMessage.style.color = '#9cf7b9';
      sendMessage.textContent = 'Wire sent (demo).';
      setTimeout(()=> sendForm.style.display = 'none', 900);
    });

    logoutBtn.addEventListener('click', ()=>{
      localStorage.removeItem(KEY.AUTH);
      location.reload();
    });
  }

  function renderAll(){
    renderAccounts();
    renderCreditCard();
    renderAccountTxs();
    renderCCTxs();
  }

  function renderAccounts(){
    const accounts = JSON.parse(localStorage.getItem(KEY.ACCOUNTS) || '{}');
    const business = Number(accounts.business || 0);
    const personal = Number(accounts.personal || 0);
    const total = business + personal;

    balBusiness.textContent = formatCurrency(business);
    balPersonal.textContent = formatCurrency(personal);
    balTotal.textContent = formatCurrency(total);

    updateCurrentBalanceSmall();
  }

  function renderCreditCard(){
    const cc = JSON.parse(localStorage.getItem(KEY.CC) || '{}');
    const owed = Number(cc.owed || 0);
    const limit = Number(cc.limit || 0);
    const available = limit - owed;

    ccOwed.textContent = formatCurrency(owed);
    ccLimit.textContent = "Limit " + formatCurrency(limit);
    ccAvail.textContent = formatCurrency(available);
  }

  function renderAccountTxs(){
    const accTxs = JSON.parse(localStorage.getItem(KEY.TX_ACCOUNTS) || '[]');
    txList.innerHTML = '';
    accTxs.slice(0,200).forEach(tx=>{
      const d = new Date(tx.iso);
      const node = document.createElement('div');
      node.className = 'tx';
      node.innerHTML = `
        <div class="tx-left">
          <div class="tx-merchant">${escapeHtml(tx.merchant)}</div>
          <div class="tx-details">${d.toLocaleDateString()} • ${tx.account === 'business' ? 'Master Lighting Productions' : 'Menachem Boaron'}${tx.note ? ' • ' + escapeHtml(tx.note) : ''}</div>
        </div>
        <div style="text-align:right">
          <div class="tx-amount" style="color:#ffb4b4">-${formatCurrency(tx.amount).replace('$','')}</div>
        </div>
      `;
      txList.appendChild(node);
    });
  }

  function renderCCTxs(){
    const ccTxs = JSON.parse(localStorage.getItem(KEY.TX_CC) || '[]');
    txListCC.innerHTML = '';
    ccTxs.slice(0,200).forEach(tx=>{
      const d = new Date(tx.iso);
      const node = document.createElement('div');
      node.className = 'tx';
      node.innerHTML = `
        <div class="tx-left">
          <div class="tx-merchant">${escapeHtml(tx.merchant)}</div>
          <div class="tx-details">${d.toLocaleDateString()} ${tx.note ? '• ' + escapeHtml(tx.note) : ''}</div>
        </div>
        <div style="text-align:right">
          <div class="tx-amount" style="color:#ffb4b4">-${formatCurrency(tx.amount).replace('$','')}</div>
        </div>
      `;
      txListCC.appendChild(node);
    });
  }

  function updateCurrentBalanceSmall(){
    const accounts = JSON.parse(localStorage.getItem(KEY.ACCOUNTS) || '{}');
    const from = fromAccount.value;
    const current = Number(accounts[from] || 0);
    currentBalanceSmall.textContent = formatCurrency(current);
  }

  function generateAccountTXs(){
    const list = [];
    const now = Date.now();
    const businessVendors = [
      "MLP Warehouse Rent",
      "Rigging Supplier NY",
      "Lighting Vendor Tel Aviv",
      "Truss & Stage Rentals",
      "PRG Equipment",
      "Video Wall Panels",
      "LED Fixture Purchase",
      "Truck Rental & Fuel",
      "Show Crew Payroll",
      "Event Insurance"
    ];
    const personalStuff = [
      "Transfer to Credit Card",
      "Gym Membership",
      "Amazon Order",
      "Uber NYC",
      "Grocery Market",
      "Child Activity Payment"
    ];
    for (let i=0;i<40;i++){
      const isBusiness = i % 2 === 0;
      if (isBusiness){
        const m = businessVendors[Math.floor(Math.random()*businessVendors.length)];
        list.push({
          id: 'acc_biz_'+i,
          account: 'business',
          merchant: m,
          amount: Number((500 + Math.random()*15000).toFixed(2)),
          iso: new Date(now - i*60*60*1000).toISOString(),
          note: 'Invoice ' + (1000+i)
        });
      } else {
        const m = personalStuff[Math.floor(Math.random()*personalStuff.length)];
        list.push({
          id: 'acc_per_'+i,
          account: 'personal',
          merchant: m,
          amount: Number((50 + Math.random()*3000).toFixed(2)),
          iso: new Date(now - i*90*60*1000).toISOString(),
          note: ''
        });
      }
    }
    list.sort((a,b)=> new Date(b.iso) - new Date(a.iso));
    return list;
  }

  function generateCCTxs(){
    const luxury = [
      "Louis Vuitton 5th Ave",
      "Prada Soho",
      "Gucci Madison",
      "Dior Boutique",
      "Bottega Veneta",
      "Rolex Authorized",
      "Cartier NYC",
      "Fendi Boutique"
    ];
    const restaurants = ["Nobu","Carbone","Le Bernardin","The Modern","Cipriani Downtown","Casa Cipriani"];
    const travel = ["Delta Airlines","El Al Israel","Four Seasons","Ritz Carlton","Uber Black"];
    const txs = [];
    const now = Date.now();

    let i = 0;
    luxury.forEach(m=>{
      txs.push({
        id: 'cc_lux_'+i,
        merchant: m,
        amount: Number((4000 + Math.random()*10000).toFixed(2)),
        iso: new Date(now - i*45*60*1000).toISOString(),
        note: 'CC Purchase'
      });
      i++;
    });
    for (let j=0;j<40;j++){
      const pick = Math.random();
      let merchant, amount;
      if (pick < 0.33){
        merchant = restaurants[Math.floor(Math.random()*restaurants.length)];
        amount = Number((150 + Math.random()*600).toFixed(2));
      } else if (pick < 0.66){
        merchant = travel[Math.floor(Math.random()*travel.length)];
        amount = Number((200 + Math.random()*2500).toFixed(2));
      } else {
        merchant = "Online Purchase";
        amount = Number((50 + Math.random()*450).toFixed(2));
      }
      txs.push({
        id: 'cc_'+i,
        merchant,
        amount,
        iso: new Date(now - i*70*60*1000).toISOString(),
        note: ''
      });
      i++;
    }
    txs.sort((a,b)=> new Date(b.iso) - new Date(a.iso));
    return txs;
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({
      '&':'&amp;',
      '<':'&lt;',
      '>':'&gt;',
      '"':'&quot;',
      "'":'&#39;'
    }[m]));
  }

})();
</script>
</body>
</html>
